<form [formGroup]="bookForm" (ngSubmit)="onSubmit()">
  <div class="mb-3">
    <label class="form-label">Title</label>
    <input type="text" class="form-control" formControlName="title" placeholder="Book Title" />
    <ng-container *ngIf="bookForm.get('title')?.touched && bookForm.get('title')?.invalid">
      <small class="text-danger" *ngIf="bookForm.get('title')?.errors?.['required']">Title is required.</small>
      <small class="text-danger" *ngIf="bookForm.get('title')?.errors?.['minlength']">Minimum 2 characters required.</small>
    </ng-container>
  </div>

  <div class="mb-3">
    <label class="form-label">Author</label>
    <input type="text" class="form-control" formControlName="author" placeholder="Author Name" />
    <ng-container *ngIf="bookForm.get('author')?.touched && bookForm.get('author')?.invalid">
      <small class="text-danger" *ngIf="bookForm.get('author')?.errors?.['required']">Author is required.</small>
      <small class="text-danger" *ngIf="bookForm.get('author')?.errors?.['minlength']">Minimum 2 characters required.</small>
    </ng-container>
  </div>

  <div class="mb-3">
    <label class="form-label">ISBN</label>
    <input type="text" class="form-control" formControlName="isbn" placeholder="ISBN (10 or 13 digits)" />
    <ng-container *ngIf="bookForm.get('isbn')?.touched && bookForm.get('isbn')?.invalid">
      <small class="text-danger" *ngIf="bookForm.get('isbn')?.errors?.['required']">ISBN is required.</small>
      <small class="text-danger" *ngIf="bookForm.get('isbn')?.errors?.['pattern']">Enter a valid ISBN (10 or 13 digits).</small>
    </ng-container>
  </div>

  <div class="mb-3">
    <label class="form-label">Genre</label>
    <select class="form-control" formControlName="genreId">
      <option value="" disabled>Select Genre</option>
      <option *ngFor="let genre of genres" [value]="genre.genreId">{{ genre.genreName }}</option>
    </select>
    <ng-container *ngIf="bookForm.get('genreId')?.touched && bookForm.get('genreId')?.invalid">
      <small class="text-danger" *ngIf="bookForm.get('genreId')?.errors?.['required']">Genre is required.</small>
    </ng-container>
  </div>

  <div class="mb-3">
    <label class="form-label">Description</label>
    <textarea class="form-control" formControlName="description" placeholder="Book Description"></textarea>
    <ng-container *ngIf="bookForm.get('description')?.touched && bookForm.get('description')?.invalid">
      <small class="text-danger" *ngIf="bookForm.get('description')?.errors?.['minlength']">Minimum 10 characters required.</small>
    </ng-container>
  </div>

  <div class="mb-3">
    <label class="form-label">Total Copies</label>
    <input type="number" class="form-control" formControlName="totalCopies" placeholder="Total Copies" />
    <ng-container *ngIf="bookForm.get('totalCopies')?.touched && bookForm.get('totalCopies')?.invalid">
      <small class="text-danger" *ngIf="bookForm.get('totalCopies')?.errors?.['required']">Total copies is required.</small>
      <small class="text-danger" *ngIf="bookForm.get('totalCopies')?.errors?.['min']">Must be at least 1 copy.</small>
    </ng-container>
  </div>

  <div class="mb-3">
    <label class="form-label">Cover Image</label>
    <input type="file" class="form-control" (change)="onFileChange($event)" accept="image/*" />
    <ng-container *ngIf="bookForm.get('coverImage')?.touched && bookForm.get('coverImage')?.invalid">
      <small class="text-danger" *ngIf="bookForm.get('coverImage')?.errors?.['required']">Cover image is required.</small>
    </ng-container>
  </div>

  <div class="text-center">
    <button type="submit" class="btn btn-success w-100">Save Book</button>
  </div>
</form>